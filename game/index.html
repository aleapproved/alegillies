<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>game ‚Äî alegilli.es</title>

  <!-- Set theme before paint -->
  <script src="/theme-init.js"></script>

  <meta name="description" content="Minimal clicker game ‚Äî woodcutting, mining and fishing with a clean aesthetic." />

  <!-- Site CSS -->
  <link rel="stylesheet" href="/base.css?v=5">
  <link rel="stylesheet" href="/game.css?v=1">

  <style>
    /* Only this page: don‚Äôt allow vertical scrolling */
    html { overflow-y: hidden; }
    /* Trim the big site margin so everything fits comfortably */
    body[data-page="game"] .wrap { margin: 1.25rem 0; }
  </style>

</head>
<body data-page="game">

  <button class="toggle" id="themeToggle" type="button" aria-pressed="false" aria-label="Toggle dark mode">‚òÄÔ∏è/üåô</button>

  <div class="wrap">
    <h1>game</h1>
    <hr>

    <div class="game-grid">
      <section>
        <dl class="stats" aria-live="polite">
          <dt>woodcutting</dt>
          <dd>
            <div class="statrow">
              <div class="progress" aria-hidden="true">
                <div class="progress-bar" id="bar-wood" style="width:0%"></div>
              </div>
              <span class="level" id="text-wood">‚Äì</span>
            </div>
          </dd>

          <dt>mining</dt>
          <dd>
            <div class="statrow">
              <div class="progress" aria-hidden="true">
                <div class="progress-bar" id="bar-mine" style="width:0%"></div>
              </div>
              <span class="level" id="text-mine">‚Äì</span>
            </div>
          </dd>

          <dt>fishing</dt>
          <dd>
            <div class="statrow">
              <div class="progress" aria-hidden="true">
                <div class="progress-bar" id="bar-fish" style="width:0%"></div>
              </div>
              <span class="level" id="text-fish">‚Äì</span>
            </div>
          </dd>
        </dl>
      </section>

      <section>
        <div class="arena" id="arena" aria-label="play area"></div>
      </section>
    </div>
  </div>

  <!-- Level-up toast (announced to SR via aria-live) -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- Game logic -->
  <script src="/game/game.js" defer></script>

  <script>
    (function () {
      const GAP = 24; // px gap between arena and bottom of the screen
      const arena = document.getElementById('arena');

      function fitArena() {
        if (!arena) return;

        // Temporarily unset height to measure true top position
        arena.style.height = 'auto';
        const top = arena.getBoundingClientRect().top; // px from viewport top to arena top

        // Remaining space minus our desired bottom gap
        const available = Math.max(140, Math.floor(window.innerHeight - GAP - top));
        arena.style.height = available + 'px';
      }

      // Re-fit on common resizes and after fonts load (text height can change)
      window.addEventListener('resize', fitArena);
      window.addEventListener('orientationchange', fitArena);
      if (document.fonts && document.fonts.ready) document.fonts.ready.then(fitArena);
      window.addEventListener('load', fitArena);

      // First run
      fitArena();
    })();
  </script>

  <script src="/theme.js" defer></script>
  <script src="/favicon.js" defer></script>

</body>
</html>